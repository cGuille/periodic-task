<!DOCTYPE html>
<html>
<head>
    <title>PeriodicTask demo</title>
</head>
<body>
    <script src="periodic-task.js"></script>
    <script>
'use strict';

var levels = ['debug', 'notice', 'warning', 'error'];
var DEFAULT_LEVEL = levels[0];

function log(message, level) {
    if (!level) {
        level = DEFAULT_LEVEL;
    }
    if (levels.indexOf(level) === -1) {
        throw new Error('Invalid log level: `' + level + '`');
    }
    console.log('[' + level + '] ' + message);
}

function t() {
    return +new Date();
}
var t0;
var delay = 2000;
var log_count = 0;

var task = new PeriodicTask(delay, function () {
    log_count += 1;
    log('#' + log_count + ' ~' + ((t() - t0) / 1000) + 's');
});

console.log('The demo task is available:', task);
console.log('It will be started automatically.')
console.log('Try running `task.stop();` or `task.run();`');

t0 = t();
task.run();
    </script>
</body>
</html>
